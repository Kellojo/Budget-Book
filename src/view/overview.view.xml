<mvc:View
	controllerName="com.budgetBook.controller.overview"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:u="sap.ui.unified"
    xmlns:kM="kellojo.m"
    height="100%"
    width="100%"
    id="idAppView">

    <Page showHeader="true" class="budgetBookPage">
            
        <content>
            <kM:TableActions>
                <MenuButton type="Transparent" text="2020">
                    <Menu items="{
							path: 'Database>/transactions',
							formatter: '.formatAvailableYears'
						}">
                        <MenuItem text="{>}" />
                    </Menu>
                </MenuButton>

                <kM:right>
                    <Button press="onAddButtonPress" text="Add a Transaction"></Button>
                </kM:right>
            </kM:TableActions>

            <Table items="{ 
                path: 'Database>/transactions',
                groupHeaderFactory: '.getGroupHeader',
                sorter : {
                    path : 'occurredOn',
                    comparator: '.sortByDate',
                    group: '.groupTransactions'
                }
            }" mode="MultiSelect">
                <columns>
                    <Column>
                        <Label text="Transaction" />
                    </Column>
                    <Column hAlign="End">
                        <Label text="Amount" />
                    </Column>
                    <Column>
                        <Label text="Category" />
                    </Column>
                </columns>

                <ColumnListItem>
                    <VBox>
                        <Text text="{Database>title}"/>
                        <Label text="{ path: 'Database>occurredOn', formatter: '.formatter.fromNow'}"/>
                    </VBox>
                    
                    <u:Currency value="{Database>amount}" currency="EUR" maxPrecision="2" useSymbol="true"/>
                    <Label text="{Database>category}"/>
                </ColumnListItem>
            </Table>
        </content>

    </Page>

</mvc:View>