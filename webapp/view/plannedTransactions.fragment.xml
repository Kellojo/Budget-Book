<core:FragmentDefinition xmlns="sap.m" xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:kM="kellojo.m">
	
    <kM:Wrapper id="idPlannedTransactionsPage" visible="{= ${/currentTransactionTab} === ${i18n>overviewPageTitlePlannedTransactions}}">
        <kM:TableActions visible="{= !${device>/system/phone} }" />

        <Table id="" items="{ 
            path: 'Database>/plannedTransactions',
            sorter : {
                path : 'occurredOn',
                comparator: '.sortByDate'
            }
        }" 
        itemPress="onTransactionPress"
        noDataText="{i18n>plannedTransactionsPageNoTransactionsYet}">
            <columns>
                <Column width="48px" styleClass="budgetBookOverview-transactionItem-checkBoxColumn"/>
                <Column>
                    <Label text="Transaction" />
                </Column>
                <Column hAlign="End">
                    <Label text="Amount" />
                </Column>
                <Column>
                    <Label text="Category" />
                </Column>
                <Column width="48px"/>
            </columns>

            <ColumnListItem type="Active" class="budgetBookOverview-transactionItem">
                <CheckBox class="budgetBook-CheckBox" select="onIsCompletedChanged"  selected="{Database>transaction/isCompleted}"/>
                
                <VBox width="100%">
                    <Text text="{Database>transaction/title}" class="kellojoM-lineSpacing"/>
                    <Label text="{ parts: ['i18n>plannedTransactionsPageTransactionDetail', 'Database>transaction/reccurrence', 'Database>startingFrom'], formatter: 'formatMessage'} {i18n>}" class="budgetBookTable-lightLabel"/>
                    <Label text="{ path: 'Database>transaction/occurredOn', formatter: '.formatter.fromNow'}" class="budgetBookTable-lightLabel"/>
                </VBox>  
                
                <kM:Currency value="{Database>transaction/amount}" currency="EUR" negative="{= ${Database>type} === 'expense'}"/>
                <Label text="{Database>transaction/category}"/>
                
                <Button icon="sap-icon://delete" press="onDeletePlannedTransactionPress" type="Unstyled" class="budgetBookOverview-deleteIcon"/>
            </ColumnListItem>
        </Table>
    </kM:Wrapper>

</core:FragmentDefinition>